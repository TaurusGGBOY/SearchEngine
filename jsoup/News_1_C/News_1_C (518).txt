 中有个比较重要的概念就是时间基 本身有个时间基 视频输入流有时间基 输出流有时间基 音频也是相同道理 主要的目的是方便他们自己内部计算 我们先拿视频播放器来举例 其中要对时间进行处理的是视频的时间 音频的时间 然后两者要进行同步 我们先看 的结构体 这就是一个分数 我们播放一个视频打印日志发现 视频的时间基是 这个 怎么算出来的我是真不知道 音频时间基是 这个还好理解 音频采样率就是 也就是一秒钟采样 个 那么每个 就是对应 秒 我播放的视频刚好在 秒左右 看打印出来的日志是不是不那么看不懂了 其实就是毫秒 不管音频视频的时间有多么奇葩 乘以 后都转换成了我们熟悉的毫秒 使用以下方式转换 我们再以 项目地址 这个中的视频剪辑 就是下面这个 主要解码音视频 编码音视频都涉及到了时间基 所以用这个说下时间基比较合适 对应文件是 项目地址 中的 视频剪辑就是裁剪时间维度 比如我只要视频的 秒到 秒之间的视频 所以涉及的逻辑是先跳转 到附近的关键帧 然后再解码到指定的地方 然后将 数据 进行编码 当然音频也是 这里面就有输入流 的时间基 因为要重新生成一个 文件 所以有输出流 的时间基 所以我们需要转换 如果不转换要么写入不进去 要么播放有问题 再看看 哪里需要用这个时间基呢 比如我们录像的时候又视频和音频 比如视频的是 秒 帧 音频的采样率是 那么视频的一帧所占的时间是 秒 音频的一个 是 秒 这时他们的时间基就是 不过还是需要做成分数形式 我们每编码一个视频帧就需要打上时间戳 比如我们第一帧视频就是 音频是相同道理 但是在输出 文件的时候输出流有各自的时间基 所以这个时候需要做个转换 这是直接把 中对应的 都直接转换了