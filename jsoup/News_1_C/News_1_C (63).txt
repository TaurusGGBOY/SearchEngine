一 查看集群信息 二 查看各组件状态 或者 三 信息 查看节点 对应的是 的主机名 将命令中的 变为 也是可以的 将命令中的 变为 也是可以的 查看 清单 将命令中的 变为 也是可以的 查看 清单 将命令中的 变为 也是可以的 或者 后面的 表示 打印奇数行 查看 清单 同理可以将命令中的 变为 也是可以的 查看 和 查看 和 和 一样 以 格式输出 的详细信息 注意下面命令中的 的名称可以通过上面命令查看 还可以输出其它格式和方法 查看帮助 查看指定 跑在哪个 上 方法 类似于 同样用于获取 的相关信息 不同的是 获得的是更详细的 个性的详细信息 获得的是 集群相关的信息 命令同 类似 但是 不支持 选项 对于同一类型 输出的信息格式 内容域相同 需要注意 如果发现是查询某个 的信息 使用 命令能够获取更加详尽的信息 但是如果想要查询某个 的状态 如某个 并不是在 状态 这时需要获取更详尽的状态信息时 就应该使用 命令 创建 命令用于根据文件或输入创建集群 如果已经定义了相应 的 或 文件 直接 即可创建文件内定义的 也可以直接只用子命令 等直接创建相应的 从追踪和维护的角度出发 建议使用 或 的方式定义资源 命令格式 文件名 更新替换资源 命令用于对已有资源进行更新 替换 如前面 中创建的 当我们需要更新 的一些属性的时候 如果修改副本数量 增加 修改 更改 版本 修改端口等 都可以直接修改原 文件 然后执行 命令 需要注意 名字不能被更更新 另外 如果是更新 原有标签的 将会与更新 后的 断开联系 有新 的 将会创建指定副本数的新的 但是默认 并不会删除原来的 所以此时如果使用 将会发现 数翻倍 进一步 会发现原来的 已经不会被新 控制 此处只介绍命令不详谈此问题 好奇者可自行实验 命令格式 如果一个容器已经在运行 这时需要对一些容器属性进行修改 又不想删除容器 或不方便通过 的方式进行更新 还提供了一种在容器运行时 直接 对容器进行修改的方式 就是 命令 如创建 的 是 如果在运行过程中 需要把其 改为 这个 命令如下 提供了另一种更新 源的操作 通过 能够灵活的在一个 的 基础上 发展出更过的 例如 使用 直接更新前面创建的 的命令为 上面命令的效果等效于 这此文件里做一些修改 根据 名或 删除 命令提供了比 等更严格的更新 的方式 通过 用户可以将 的 使用 的方式维护在版本库中 每次有更新时 将配置文件 到 然后使用 将更新应用到 会在引用更新前将当前配置文件中的配置同已经应用的配置 做比较 并只更新更改的部分 而不会主动更改任何用户未指定的部分 命令的使用方式同 相同 不同的是 不会删除原有 然后创建新的 直接在原有 的基础上进行更新 同时 还会 中添加一条注释 标记当前的 类似于 操作 命令用于显示 运行中 容器内程序输出到标准输出的内容 跟 的 命令类似 如果要获得 的方式 也可以使用 选项 是一个非常重要的命令 对于已经部署并且正在运行的业务 提供了不中断业务的更新方式 每次起一个新的 等新 完全起来后删除一个旧的 然后再起一个新的 替换旧的 直到替换掉所有的 需要确保新的版本有不同的 和 否则会报错 如果在升级过程中 发现有问题还可以中途停止 并回滚到前面版本 还有很多其他选项提供丰富的功能 如 指定间隔周期 使用时可以使用 查看 信息 注意下面的 是在 文件中定义的 名称 用于程序在负载加重或缩小时副本进行扩容或缩小 如前面创建的 有两个副本 可以轻松的使用 命令对副本数进行扩展或缩小 扩展副本数到 重新缩减副本数到 虽然能够很方便的对副本数进行扩展或缩小 但是仍然需要人工介入 不能实时自动的根据系统负载对副本数进行扩 缩 命令提供了自动根据 负载 对其副本进行扩缩的功能 命令会给一个 指定一个副本数的范围 在实际运行中根据 中运行的程序的负载自动在指定的范围内对 进行扩容或缩容 如前面创建的 可以用 如下命令指定副本范围在 命令类似于 的 命令 可以直接查看容器中以 形式运行的进程的输出 效果类似于 退出查看使用 如果一个 中有多个容器 要查看具体的某个容器的的输出 需要在 名后使用 指定运行的容器 如下示例的命令为查看 中的 中的 容器的输出 命令同样类似于 的 命令 为在一个已经运行的容器中执行一条 命令 如果一个 容器中 有多个容器 需要使用 选项指定容器 类似于 的 命令 直接运行一个 这三个命令是正式 的 新加入的命令 三个命令一起介绍 是因为三个命令配合使用可以实现节点的维护 在 之前 因为没有相应的命令支持 如果要维护一个 节点 只能 该节点上的 将该节点退出集群 是集群不在将新的 调度到该节点上 如果该节点上本生就没有 在运行 则不会对业务有任何影响 如果该节 点上有 正在运行 停止后 会发现该节点不可达 而将该节点标记为 状态 不会将新的节点调度到该节点上 同时 会在其他节点上创建新的 替换该节点上的 这种方式虽然能够保证集群的健壮性 但是任然有些暴力 如果业务只有一个副本 而且该副本正好运行在被维护节点上的话 可能仍然会造成业 务的短暂中断 中新加入的这 个命令可以保证维护节点时 平滑的将被维护节点上的业务迁移到其他节点上 保证业务不受影响 如下图所示是一个整个的节点维护的流程 为了方便 增加了一些查看节点信息的操作 首先查看当前集群所有节点状态 可以看到共四个节点都处于 状态 查看当前 两个副本分别运行在 和 两个节点上 使用 命令将 标记为不可调度 再使用 查看节点状态 发现 虽然还处于 状态 但是同时还被禁能了调度 这意味着新的 将不会被调度到 上 再查看 状态 没有任何变化 两个副本仍运行在 和 上 执行 命令 将运行在 上运行的 平滑的赶到其他节点上 再查看 的状态发现 上的副本已经被迁移到 上 这时候就可以对 进行一些节点维护的操作 如升级内核 升级 等 节点维护完后 使用 命令解锁 使其重新变得可调度 检查节点状态 发现 重新变回 状态 常用命令 查看日志 修改 的副本数量 来实现 的动态缩放 检查网络集群健康状态 带有安全认证检查网络集群健康状态 基础进阶 查看所有 查看所有发布 查看所有 查看所有 的 及节点 指定类型查看 查看 详细信息 动态伸缩 动态伸缩 动态伸缩 进入容器 增加节点 值 指定 在哪个节点 获取 的节点 增加 值 删除 值 修改 值 配置文件滚动升级 命令升级 版本回滚